<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="node_modules/browser-detect/dist/browser-detect.umd.js"></script>
<script src="http://localhost:3000/socket.io/socket.io.js"></script>

<script>
/* custom namespace
    $(()=>{
        const socket = io.connect("http://localhost:3000/custom");

    $('button').on('click',()=>{
        socket.emit('isim yaz');
    })
    socket.on('sendAll',(data)=>{
        $('body').append(`<br/>${data.name}`)
    })
    });
*/

//create room
$(()=>{
    const result = browserDetect();
    var inout; 
    const socket = io.connect('http://localhost:3000/',{
        reconnectionAttempts:2,//3 kez bağlanmayı dener
        reconnectionDelay:500,//3snde 1 bağlanmayı dene
        // reconnection:false --> bir kez bağlanmayı dener
    });
    socket.on('reconnect_attempt',()=>{
        setTimeout(() => {
            $('.status').html('Yeniden bağlanılıyor...');
        }, 1000);
    });
    socket.on('reconnect_error',()=>{
        $('.status').html('Sunucu ile bağlantı kurulamadı');
    });
    socket.on('connect',()=>{
        $('.status').html('Sunucuya bağlandı');
    });
    $('#joinRoom').on('click',()=>{
        socket.emit('joinRoom',{name:$('#roomName').val()})
    });
    $('#leaveRoom').on('click',()=>{
        socket.emit('leaveRoom',{name:$('#roomName').val()})
    });
    socket.on('new join',(data)=>{
        $('#userCount').html(`Bu odada <b> ${data.count}</b> kişi var`);
    });
    socket.on('log',(data)=>{
        $('#content').append(data.message+'</br>')
    })
    socket.emit('browser',{result,inout});
    console.log(result)

    
});
$('input[name=myInput]').keypress(function() {
    $( ".test" ).text( this.val );
    });
</script>
</head>
<body>
    <input id="roomName"/>
<button id="joinRoom">Ekle</button>
<button id="leaveRoom">Çık</button>
<div id="content"></div>
<div id="userCount"></div>
<div class="status"></div>
<div class="test"></div>
<input name="myInput"/>
</body>
</html>
